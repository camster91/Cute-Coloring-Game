@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   CALM DRAWING - ENHANCED UI STYLES
   ============================================ */

/* Base Typography & Smoothing */
@layer base {
  html {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  body {
    @apply bg-gradient-to-br from-slate-50 to-slate-100;
  }

  body.dark {
    @apply bg-gradient-to-br from-slate-900 to-slate-800;
  }

  /* Smooth transitions for theme changes */
  * {
    @apply transition-colors duration-200;
  }

  /* Prevent transition on initial load */
  .no-transition * {
    transition: none !important;
  }
}

/* ============================================
   CUSTOM ANIMATIONS
   ============================================ */
@layer utilities {
  /* Fade in animation */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(4px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-fadeIn { animation: fadeIn 0.2s ease-out; }

  /* Slide up animation */
  @keyframes slideUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-slideUp { animation: slideUp 0.3s cubic-bezier(0.16, 1, 0.3, 1); }

  /* Slide down animation */
  @keyframes slideDown {
    from { opacity: 0; transform: translateY(-10px); }
    to { opacity: 1; transform: translateY(0); }
  }
  .animate-slideDown { animation: slideDown 0.2s ease-out; }

  /* Scale in animation */
  @keyframes scaleIn {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }
  .animate-scaleIn { animation: scaleIn 0.2s cubic-bezier(0.16, 1, 0.3, 1); }

  /* Bounce in animation */
  @keyframes bounceIn {
    0% { opacity: 0; transform: scale(0.3); }
    50% { transform: scale(1.05); }
    70% { transform: scale(0.9); }
    100% { opacity: 1; transform: scale(1); }
  }
  .animate-bounceIn { animation: bounceIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55); }

  /* Subtle float animation */
  @keyframes float {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-4px); }
  }
  .animate-float { animation: float 3s ease-in-out infinite; }

  /* Pulse glow for active elements */
  @keyframes pulseGlow {
    0%, 100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
    50% { box-shadow: 0 0 0 8px rgba(99, 102, 241, 0); }
  }
  .animate-pulseGlow { animation: pulseGlow 2s ease-in-out infinite; }

  /* Soft pulse */
  @keyframes softPulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.7; }
  }
  .animate-softPulse { animation: softPulse 2s ease-in-out infinite; }

  /* Breathing animation for wellness feature */
  @keyframes breathe {
    0%, 100% { transform: scale(1); opacity: 0.8; }
    50% { transform: scale(1.1); opacity: 1; }
  }
  .animate-breathe { animation: breathe 4s ease-in-out infinite; }

  /* Shimmer effect for loading states */
  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }
  .animate-shimmer {
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  /* Gradient shift animation */
  @keyframes gradientShift {
    0%, 100% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
  }
  .animate-gradient {
    background-size: 200% 200%;
    animation: gradientShift 3s ease infinite;
  }
}

/* ============================================
   GLASSMORPHISM & DEPTH EFFECTS
   ============================================ */
@layer components {
  /* Glass effect for panels */
  .glass {
    @apply bg-white/80 dark:bg-slate-800/80 backdrop-blur-xl;
    @apply border border-white/20 dark:border-slate-700/50;
    @apply shadow-lg shadow-black/5 dark:shadow-black/20;
  }

  .glass-subtle {
    @apply bg-white/60 dark:bg-slate-800/60 backdrop-blur-md;
    @apply border border-white/10 dark:border-slate-700/30;
  }

  /* Elevated card effect */
  .elevated {
    @apply bg-white dark:bg-slate-800;
    @apply shadow-xl shadow-slate-200/50 dark:shadow-slate-900/50;
    @apply border border-slate-100 dark:border-slate-700;
  }

  /* Inset/recessed effect */
  .inset {
    @apply bg-slate-50 dark:bg-slate-900/50;
    @apply shadow-inner;
    @apply border border-slate-200/50 dark:border-slate-700/50;
  }

  /* Floating effect with hover */
  .floating {
    @apply transition-all duration-300;
    @apply hover:-translate-y-0.5 hover:shadow-lg;
  }
}

/* ============================================
   ENHANCED BUTTON STYLES
   ============================================ */
@layer components {
  /* Primary button */
  .btn-primary {
    @apply px-4 py-2 rounded-xl font-medium;
    @apply bg-gradient-to-r from-indigo-500 to-purple-500;
    @apply text-white shadow-lg shadow-indigo-500/25;
    @apply hover:shadow-xl hover:shadow-indigo-500/30;
    @apply hover:-translate-y-0.5;
    @apply active:translate-y-0 active:shadow-md;
    @apply transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2;
  }

  /* Secondary button */
  .btn-secondary {
    @apply px-4 py-2 rounded-xl font-medium;
    @apply bg-slate-100 dark:bg-slate-700;
    @apply text-slate-700 dark:text-slate-200;
    @apply hover:bg-slate-200 dark:hover:bg-slate-600;
    @apply active:scale-[0.98];
    @apply transition-all duration-200;
    @apply focus:outline-none focus:ring-2 focus:ring-slate-400 focus:ring-offset-2;
  }

  /* Ghost button */
  .btn-ghost {
    @apply px-4 py-2 rounded-xl font-medium;
    @apply text-slate-600 dark:text-slate-300;
    @apply hover:bg-slate-100 dark:hover:bg-slate-700/50;
    @apply active:scale-[0.98];
    @apply transition-all duration-200;
  }

  /* Icon button - refined */
  .btn-icon {
    @apply p-2 rounded-xl;
    @apply text-slate-500 dark:text-slate-400;
    @apply hover:bg-slate-100 dark:hover:bg-slate-700/50;
    @apply hover:text-slate-700 dark:hover:text-slate-200;
    @apply active:scale-95;
    @apply transition-all duration-150;
    @apply focus:outline-none focus:ring-2 focus:ring-indigo-500/50;
  }

  .btn-icon.active {
    @apply bg-indigo-50 dark:bg-indigo-900/30;
    @apply text-indigo-600 dark:text-indigo-400;
    @apply shadow-sm;
  }

  /* Tool button - for toolbar items */
  .btn-tool {
    @apply flex flex-col items-center justify-center gap-1;
    @apply p-2.5 rounded-xl;
    @apply text-slate-600 dark:text-slate-400;
    @apply hover:bg-slate-100 dark:hover:bg-slate-700/50;
    @apply active:scale-95;
    @apply transition-all duration-150;
  }

  .btn-tool.active {
    @apply bg-gradient-to-br from-indigo-50 to-purple-50 dark:from-indigo-900/40 dark:to-purple-900/40;
    @apply text-indigo-600 dark:text-indigo-400;
    @apply shadow-sm ring-1 ring-indigo-200/50 dark:ring-indigo-500/20;
  }

  /* Color swatch button */
  .btn-swatch {
    @apply rounded-lg;
    @apply ring-2 ring-transparent ring-offset-2 ring-offset-white dark:ring-offset-slate-800;
    @apply hover:scale-110 hover:ring-slate-300 dark:hover:ring-slate-600;
    @apply active:scale-100;
    @apply transition-all duration-150;
  }

  .btn-swatch.active {
    @apply ring-indigo-500 scale-110;
    @apply shadow-lg;
  }
}

/* ============================================
   ENHANCED INPUT CONTROLS
   ============================================ */
@layer components {
  /* Text input */
  .input {
    @apply w-full px-3 py-2 rounded-xl;
    @apply bg-slate-50 dark:bg-slate-900/50;
    @apply border border-slate-200 dark:border-slate-700;
    @apply text-slate-900 dark:text-slate-100;
    @apply placeholder:text-slate-400 dark:placeholder:text-slate-500;
    @apply focus:outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500;
    @apply transition-all duration-200;
  }

  /* Enhanced range slider */
  .slider-enhanced {
    @apply w-full h-2 rounded-full appearance-none cursor-pointer;
    @apply bg-slate-200 dark:bg-slate-700;
  }

  .slider-enhanced::-webkit-slider-thumb {
    @apply appearance-none w-5 h-5 rounded-full;
    @apply bg-white border-2 border-indigo-500;
    @apply shadow-lg shadow-indigo-500/30;
    @apply hover:scale-110 hover:border-indigo-600;
    @apply active:scale-100;
    @apply transition-all duration-150;
    cursor: grab;
  }

  .slider-enhanced::-webkit-slider-thumb:active {
    cursor: grabbing;
  }

  .slider-enhanced::-moz-range-thumb {
    @apply w-5 h-5 rounded-full border-0;
    @apply bg-white border-2 border-indigo-500;
    @apply shadow-lg shadow-indigo-500/30;
    cursor: grab;
  }

  /* Toggle switch */
  .toggle {
    @apply relative inline-flex h-6 w-11 items-center rounded-full;
    @apply bg-slate-200 dark:bg-slate-700;
    @apply transition-colors duration-200;
  }

  .toggle.active {
    @apply bg-gradient-to-r from-indigo-500 to-purple-500;
  }

  .toggle-thumb {
    @apply inline-block h-4 w-4 transform rounded-full;
    @apply bg-white shadow-md;
    @apply transition-transform duration-200;
  }

  .toggle.active .toggle-thumb {
    @apply translate-x-6;
  }

  .toggle:not(.active) .toggle-thumb {
    @apply translate-x-1;
  }
}

/* ============================================
   ENHANCED PANELS & CARDS
   ============================================ */
@layer components {
  /* Panel header */
  .panel-header {
    @apply flex items-center justify-between;
    @apply px-3 py-2 mb-3;
    @apply border-b border-slate-100 dark:border-slate-700/50;
  }

  .panel-title {
    @apply text-xs font-semibold uppercase tracking-wider;
    @apply text-slate-500 dark:text-slate-400;
  }

  /* Section within panel */
  .panel-section {
    @apply p-3 rounded-xl;
    @apply bg-slate-50/50 dark:bg-slate-900/30;
    @apply border border-slate-100 dark:border-slate-700/30;
  }

  /* Card with hover effect */
  .card {
    @apply p-4 rounded-2xl;
    @apply bg-white dark:bg-slate-800;
    @apply border border-slate-100 dark:border-slate-700;
    @apply shadow-sm hover:shadow-md;
    @apply transition-shadow duration-200;
  }

  /* Feature card */
  .feature-card {
    @apply p-4 rounded-2xl;
    @apply bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-900;
    @apply border border-slate-200/50 dark:border-slate-700/50;
    @apply shadow-xl shadow-slate-200/30 dark:shadow-slate-900/50;
  }
}

/* ============================================
   ENHANCED SCROLLBAR
   ============================================ */
@layer components {
  .scrollbar-thin {
    scrollbar-width: thin;
    scrollbar-color: theme('colors.slate.300') transparent;
  }

  .scrollbar-thin::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  .scrollbar-thin::-webkit-scrollbar-track {
    @apply bg-transparent rounded-full;
  }

  .scrollbar-thin::-webkit-scrollbar-thumb {
    @apply bg-slate-300 dark:bg-slate-600 rounded-full;
    @apply hover:bg-slate-400 dark:hover:bg-slate-500;
  }

  .scrollbar-hidden {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .scrollbar-hidden::-webkit-scrollbar {
    display: none;
  }
}

/* ============================================
   UTILITY EFFECTS
   ============================================ */
@layer utilities {
  /* Button press effect */
  .btn-press:active {
    transform: scale(0.97);
  }

  /* Focus ring styling */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2;
  }

  .dark .focus-ring {
    @apply focus:ring-offset-slate-800;
  }

  /* Gradient text */
  .text-gradient {
    @apply bg-gradient-to-r from-indigo-500 to-purple-500 bg-clip-text text-transparent;
  }

  /* Truncate with fade */
  .truncate-fade {
    @apply relative overflow-hidden;
    mask-image: linear-gradient(to right, black 80%, transparent);
    -webkit-mask-image: linear-gradient(to right, black 80%, transparent);
  }

  /* Subtle border glow */
  .glow-border {
    @apply relative;
  }

  .glow-border::before {
    content: '';
    @apply absolute inset-0 rounded-inherit;
    @apply bg-gradient-to-r from-indigo-500 to-purple-500;
    @apply opacity-0 blur-xl -z-10;
    @apply transition-opacity duration-300;
  }

  .glow-border:hover::before {
    @apply opacity-20;
  }
}

/* ============================================
   SPECIFIC COMPONENT ENHANCEMENTS
   ============================================ */

/* Color palette grid */
.color-grid {
  @apply grid gap-2;
  grid-template-columns: repeat(auto-fill, minmax(32px, 1fr));
}

/* Tool grid */
.tool-grid {
  @apply grid grid-cols-3 gap-2;
}

/* Breathing exercise circle */
.breathing-circle {
  @apply relative w-32 h-32 mx-auto;
}

.breathing-circle::before {
  content: '';
  @apply absolute inset-0 rounded-full;
  @apply bg-gradient-to-br from-blue-400 to-purple-500;
  @apply opacity-20;
  animation: breathe 4s ease-in-out infinite;
}

/* Mood tracker chart bar */
.mood-bar {
  @apply rounded-t-lg transition-all duration-300;
  @apply hover:opacity-90;
}

/* Template card */
.template-card {
  @apply aspect-square rounded-xl overflow-hidden;
  @apply bg-white dark:bg-slate-700;
  @apply border-2 border-transparent;
  @apply hover:border-indigo-300 dark:hover:border-indigo-600;
  @apply hover:shadow-lg hover:-translate-y-0.5;
  @apply transition-all duration-200;
}

.template-card.active {
  @apply border-indigo-500 shadow-lg shadow-indigo-500/20;
}
